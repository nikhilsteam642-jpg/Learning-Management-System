<!DOCTYPE html>
<html>
<head>
  <title>SkillSwap | Reports</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* Add this to your style.css or keep here for quick fix */
    .teacher-content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .content-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      border-top: 5px solid #6a5cff;
    }
    .content-card h4 { margin: 0 0 10px 0; color: #333; }
    .upload-stat { font-size: 24px; font-weight: bold; color: #6a5cff; }
    .stat-label { font-size: 12px; color: #888; text-transform: uppercase; }
  </style>
</head>
<body>

<div class="main-container" style="max-width: 900px; margin: auto; padding: 20px;">
    <h2>üìä {{ 'Teacher' if role == 'teacher' else 'Student' }} Analysis Report</h2>

    <div class="report-container" style="display: flex; gap: 20px; margin-bottom: 30px;">
      <div class="report-card completed" style="flex: 1; padding: 20px; background: #e8f5e9; border-radius: 10px;">
        <h3>‚úÖ Completed</h3>
        <div class="number" style="font-size: 32px;">{{ completed_classes }}</div>
      </div>
      <div class="report-card active" style="flex: 1; padding: 20px; background: #fff3e0; border-radius: 10px;">
        <h3>‚è≥ Active</h3>
        <div class="number" style="font-size: 32px;">{{ active_classes }}</div>
      </div>
    </div>

    <hr>

    {% if role == 'teacher' %}
        <h3>üì§ Content Uploaded per Class</h3>
        <div class="teacher-content-grid">
            {% for item in teacher_data %}
                <div class="content-card">
                    <h4>{{ item.class_name }}</h4>
                    <div style="display: flex; justify-content: space-between;">
                        <div>
                            <div class="upload-stat">{{ item.total_uploads }}</div>
                            <div class="stat-label">Files/Videos</div>
                        </div>
                        <div>
                            <div class="upload-stat" style="color: #ff9800;">{{ item.total_quizzes }}</div>
                            <div class="stat-label">Quizzes</div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <h3>üìö Your Learning Progress</h3>
        {% for p in progress_data %}
            <div class="progress-box" style="margin-bottom: 15px; background: #f9f9ff; padding: 15px; border-radius: 10px;">
                <div class="progress-title"><strong>{{ p.class_name }}</strong></div>
                <div class="progress-container" style="background: #eee; border-radius: 10px; height: 20px; margin-top: 5px;">
                    <div class="progress-bar" style="width: {{ p.progress }}%; background: linear-gradient(90deg, #6a5cff, #00d4ff); height: 100%; border-radius: 10px; text-align: center; color: white; font-size: 12px; line-height: 20px;">
                        {{ p.progress }}%
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}

    <br>
    <a href="/dashboard" class="back-btn">‚¨Ö Back to Dashboard</a>
</div>

</body>
</html>